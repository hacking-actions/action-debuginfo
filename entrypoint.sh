#!/usr/bin/env bash
set -e

function die()
{
    echo "::error::$1"
    echo "------------------------------------------------------------------------------------------------------------------------"
    exit 1
}

cat << END
------------------------------------------------------------------------------------------------------------------------
                               _   _                      _      _                 _        __      
                              | | (_)                    | |    | |               (_)      / _|     
                     __ _  ___| |_ _  ___  _ __ ______ __| | ___| |__  _   _  __ _ _ _ __ | |_ ___  
                    / _\` |/ __| __| |/ _ \| '_ \______/ _\` |/ _ \ '_ \| | | |/ _\` | | '_ \|  _/ _ \ 
                   | (_| | (__| |_| | (_) | | | |    | (_| |  __/ |_) | |_| | (_| | | | | | || (_) |
                    \__,_|\___|\__|_|\___/|_| |_|     \__,_|\___|_.__/ \__,_|\__, |_|_| |_|_| \___/ 
                                                                              __/ |                 
                                                                             |___/

                   https://github.com/hacking-actions/action-debuginfo          (c) 2019 Max Hacking
------------------------------------------------------------------------------------------------------------------------
END

# Check for a GITHUB_WORKSPACE env variable
[[ -z "${GITHUB_WORKSPACE}" ]] && die "Must set GITHUB_WORKSPACE in env"
cd "${GITHUB_WORKSPACE}" || die "GITHUB_WORKSPACE does not exist"

exitval=0

env > "${GITHUB_WORKSPACE}/env.txt"

echo "------------------------------------------------------------------------------------------------------------------------"
exit ${exitval}
